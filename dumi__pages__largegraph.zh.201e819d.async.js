"use strict";(self.webpackChunk_antv_g6_site=self.webpackChunk_antv_g6_site||[]).push([[1985],{77960:function(e,t,n){n.r(t),n.d(t,{default:function(){return Se}});var a=n(58757),o=n(73193),i=n.n(o),r=n(45332),s=n.n(r),l=n(38917),c=n(60355),d=n(35667),g="undefined"!=typeof window?window.g6:null,u=2e3,h=.6,f=.2,p=g?g.Util.getColorSetsBySubjectColors(["#3D76DD","#19A576","#65789B","#B98700","#5349E0","#5AB8DB","#7B48A1","#D77622","#008685","#D37099"],"rgb(43, 47, 51)","dark","#777"):[],x={style:{fill:"#2B384E"},labelCfg:{style:{fill:"#acaeaf",stroke:"#191b1c"}},stateStyles:{focus:{fill:"#2B384E"}}},m={style:{stroke:"#acaeaf",realEdgeStroke:"#acaeaf",realEdgeOpacity:f,strokeOpacity:f},labelCfg:{style:{fill:"#acaeaf",realEdgeStroke:"#acaeaf",realEdgeOpacity:.5,stroke:"#191b1c"}},stateStyles:{focus:{stroke:"#fff"}}};g&&(g.registerNode("aggregated-node",{draw:function(e,t){var n=53,a=27,o=e.style||{},r=e.colorSet||p[0];t.addShape("rect",{attrs:{x:.55*-53,y:-16.2,width:1.1*n,height:32.4,fill:r.mainFill,opacity:.9,lineWidth:0,radius:16.2},name:"halo-shape",visible:!1}),t.addShape("rect",{attrs:{x:.55*-53,y:-16.2,width:1.1*n,height:32.4,fill:r.mainFill,stroke:"#AAB7C4",lineWidth:1,lineOpacty:.85,radius:16.2},name:"stroke-shape",visible:!1});var s=t.addShape("rect",{attrs:i()(i()({},o),{},{x:-26.5,y:-13.5,width:n,height:a,fill:r.mainFill,stroke:r.mainStroke,lineWidth:2,cursor:"pointer",radius:13.5,lineDash:[2,2]}),name:"aggregated-node-keyShape"}),l={};return e.labelCfg&&(l=Object.assign(l,e.labelCfg.style)),t.addShape("text",{attrs:{text:"".concat(e.count),x:0,y:0,textAlign:"center",textBaseline:"middle",cursor:"pointer",fontSize:12,fill:"#fff",opacity:.85,fontWeight:400},name:"count-shape",className:"count-shape",draggable:!0}),e.new&&t.addShape("circle",{attrs:{x:23.5,y:-10.5,r:4,fill:"#6DD400",lineWidth:.5,stroke:"#FFFFFF"},name:"typeNode-tag-circle"}),s},setState:function(e,t,n){var a=n.get("group");if("layoutEnd"===e&&t){var o=a.find((function(e){return"text-shape"===e.get("name")}));o&&o.set("visible",!0)}else if("hover"===e){if(n.hasState("focus"))return;var i=a.find((function(e){return"halo-shape"===e.get("name")})),r=n.getKeyShape(),s=n.getModel().colorSet||p[0];t?(i&&i.show(),r.attr("fill",s.activeFill)):(i&&i.hide(),r.attr("fill",s.mainFill))}else if("focus"===e){var l=a.find((function(e){return"stroke-shape"===e.get("name")})),c=n.getKeyShape(),d=n.getModel().colorSet||p[0];t?(l&&l.show(),c.attr("fill",d.selectedFill)):(l&&l.hide(),c.attr("fill",d.mainFill))}},update:void 0},"single-node"),g.registerNode("real-node",{draw:function(e,t){var n=30;(0,c.Z)(e.size)?n=e.size/2:(0,l.Z)(e.size)&&(n=e.size[0]/2);var a=e.style||{},o=e.colorSet||p[0];t.addShape("circle",{attrs:{x:0,y:0,r:n+5,fill:a.fill||o.mainFill||"#2B384E",opacity:.9,lineWidth:0},name:"halo-shape",visible:!1}),t.addShape("circle",{attrs:{x:0,y:0,r:n+5,fill:a.fill||o.mainFill||"#2B384E",stroke:"#fff",strokeOpacity:.85,lineWidth:1},name:"stroke-shape",visible:!1});var r=t.addShape("circle",{attrs:i()(i()({},a),{},{x:0,y:0,r:n,fill:o.mainFill,stroke:o.mainStroke,lineWidth:2,cursor:"pointer"}),name:"aggregated-node-keyShape"}),s={};if(e.labelCfg&&(s=Object.assign(s,e.labelCfg.style)),e.label){var d=e.label,g={},u=0;e.labelCfg&&(g=Object.assign(g,e.labelCfg.style),u+=e.labelCfg.refY||0);var h,f=g.fontSize<8?8:g.fontSize;h=(e.labelLineNum||1)*(f||12),t.addShape("text",{attrs:{text:d,x:0,y:n+u+h+5,textAlign:"center",textBaseLine:"alphabetic",cursor:"pointer",fontSize:f,fill:"#fff",opacity:.85,fontWeight:400,stroke:m.labelCfg.style.stroke},name:"text-shape",className:"text-shape"})}return e.new&&t.addShape("circle",{attrs:{x:n-3,y:3-n,r:4,fill:"#6DD400",lineWidth:.5,stroke:"#FFFFFF"},name:"typeNode-tag-circle"}),r},setState:function(e,t,n){var a=n.get("group");if("layoutEnd"===e&&t){var o=a.find((function(e){return"text-shape"===e.get("name")}));o&&o.set("visible",!0)}else if("hover"===e){if(n.hasState("focus"))return;var i=a.find((function(e){return"halo-shape"===e.get("name")})),r=n.getKeyShape(),s=n.getModel().colorSet||p[0];t?(i&&i.show(),r.attr("fill",s.activeFill)):(i&&i.hide(),r.attr("fill",s.mainFill))}else if("focus"===e){var l=a.find((function(e){return"stroke-shape"===e.get("name")})),c=a.find((function(e){return"text-shape"===e.get("name")})),d=n.getKeyShape(),g=n.getModel().colorSet||p[0];t?(l&&l.show(),d.attr("fill",g.selectedFill),c&&c.attr("fontWeight",800)):(l&&l.hide(),d.attr("fill",g.mainFill),c&&c.attr("fontWeight",400))}},update:void 0},"aggregated-node"),g.registerEdge("custom-quadratic",{setState:function(e,t,n){var a=n.get("group"),o=n.getModel();if("focus"===e){var r=a.find((function(e){return"back-line"===e.get("name")}));r&&(r.stopAnimate(),r.remove(),r.destroy());var s=a.find((function(e){return"edge-shape"===e.get("name")})),l=o.style.endArrow;if(t)if(s.cfg.animation&&s.stopAnimate(!0),s.attr({strokeOpacity:h,opacity:h,stroke:"#fff",endArrow:i()(i()({},l),{},{stroke:"#fff",fill:"#fff"})}),o.isReal){var c=s.attr(),d=c.lineWidth,g=c.path,p=c.endArrow,x=c.stroke;a.addShape("path",{attrs:{lineWidth:d,path:g,stroke:x,endArrow:p,opacity:.1},name:"back-line"}).toBack();var m=s.getTotalLength();s.animate((function(e){var t=e*m;return{lineDash:[t,m-t]}}),{repeat:!0,duration:u})}else{var y=0,b=s.attr("lineDash"),v=b[0]+b[1];s.animate((function(){return++y>v&&(y=0),{lineDash:b,lineDashOffset:-y}}),{repeat:!0,duration:u})}else{s.stopAnimate();var A="#acaeaf",w=o.isReal?f:.1;s.attr({stroke:A,strokeOpacity:w,opacity:w,endArrow:i()(i()({},l),{},{stroke:A,fill:A})})}}}},"quadratic"),g.registerEdge("custom-line",{setState:function(e,t,n){var a=n.get("group"),o=n.getModel();if("focus"===e){var r=a.find((function(e){return"edge-shape"===e.get("name")})),s=a.find((function(e){return"back-line"===e.get("name")}));s&&(s.stopAnimate(),s.remove(),s.destroy());var l=o.style.endArrow;if(t)if(r.cfg.animation&&r.stopAnimate(!0),r.attr({strokeOpacity:h,opacity:h,stroke:"#fff",endArrow:i()(i()({},l),{},{stroke:"#fff",fill:"#fff"})}),o.isReal){var c=r.attr(),d=c.path,g=c.stroke,p=c.lineWidth;a.addShape("path",{attrs:{path:d,stroke:g,lineWidth:p,opacity:.1},name:"back-line"}).toBack();var x=r.getTotalLength();r.animate((function(e){var t=e*x;return{lineDash:[t,x-t]}}),{repeat:!0,duration:u})}else{var m=r.attr("lineDash"),y=m[0]+m[1],b=0;r.animate((function(){return++b>y&&(b=0),{lineDash:m,lineDashOffset:-b}}),{repeat:!0,duration:u})}else{r.stopAnimate();var v="#acaeaf",A=o.isReal?f:.1;r.attr({stroke:v,strokeOpacity:A,opacity:A,endArrow:i()(i()({},l),{},{stroke:v,fill:v})})}}}},"single-edge"));var y=n(98667),b=n(10657),v=n(89872),A=n(25494),w=n(88433),j=n(78930),k=n(83430),S=n(99839),M=n(11090),E=void 0,I="undefined"!=typeof window,F=I?window.g6:null,z=I?n(62791):null,C=I?n(88492).Z:null;I&&z("\n  #canvas-menu {\n    position: absolute;\n    z-index: 2;\n    left: 16px;\n    top: 80px;\n    width: fit-content;\n    padding: 8px 16px;\n    background-color: rgba(54, 59, 64, 0);\n    border-radius: 24px;\n    box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0);\n    font-family: PingFangSC-Semibold;\n    transition: all 0.2s linear;\n  }\n  #canvas-menu:hover {\n    background-color: rgba(54, 59, 64, 1);\n    box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n  }\n  .icon-span {\n    padding-left: 8px;\n    padding-right: 8px;\n    cursor: pointer;\n  }\n  #search-node-input {\n    background-color: rgba(60, 60, 60, 0.95);\n    border-radius: 21px;\n    width: 100px;\n    border-color: rgba(80, 80, 80, 0.95);\n    border-style: solid;\n    color: rgba(255, 255, 255, 0.85);\n  }\n  #submit-button {\n    background-color: rgba(82, 115, 224, 0.2);\n    border-radius: 21px;\n    border-color: rgb(82, 115, 224);\n    border-style: solid;\n    color: rgba(152, 165, 254, 1);\n    margin-left: 4px;\n  }\n  .menu-tip {\n    position: absolute;\n    right: calc(30% + 32px);\n    width: fit-content;\n    height: 40px;\n    line-height: 40px;\n    top: 80px;\n    padding-left: 16px;\n    padding-right: 16px;\n    background-color: rgba(54, 59, 64, 0.5);\n    color: rgba(255, 255, 255, 0.65);\n    border-radius: 8px;\n    transition: all 0.2s linear;\n    font-family: PingFangSC-Semibold;\n  }\n  #g6-canavs-menu-item-tip {\n    position: absolute;\n    background-color: rgba(0,0,0, 0.65);\n    padding: 10px;\n    box-shadow: rgba(0, 0, 0, 0.6) 0px 0px 10px;\n    width: fit-content;\n    color: #fff;\n    border-radius: 8px;\n    font-size: 12px;\n    height: fit-content;\n    font-family: PingFangSC-Semibold;\n    transition: all 0.2s linear;\n  }\n");var L=null,N=function(e){var t=e.graph,n=e.clickFisheyeIcon,o=e.clickLassoIcon,r=e.fisheyeEnabled,l=e.lassoEnabled,c=e.stopLayout,g=e.edgeLabelVisible,u=e.setEdgeLabelVisible,h=e.searchNode,f=e.handleFindPath,p=(0,b.$)().t,x=(0,a.useState)({text:"",display:"none",opacity:0}),m=s()(x,2),y=m[0],I=m[1],z=(0,a.useState)({text:"",display:"none",opacity:0}),N=s()(z,2),R=N[0],B=N[1],D=(0,a.useState)(!1),O=s()(D,2),P=O[0],Q=O[1],W=(0,a.useState)(!1),_=s()(W,2),V=_[0],T=_[1],Z=function(e,t){var n=e.clientX;e.clientY;B({text:t,display:"block",opacity:1});var a=document.getElementById("g6-canavs-menu-item-tip");C(a,{top:"".concat(124,"px"),left:"".concat(n-20,"px"),zIndex:100})},q=function(){B({text:"",display:"none",opacity:0});var e=document.getElementById("g6-canavs-menu-item-tip");C(e,{zIndex:-100})},Y=function(e){t&&!t.destroyed&&"Escape"===e.key&&(L&&(t.removePlugin(L),n(!0)),t.setMode("default"),Q(!1),T(!1),t.get("canvas").setCursor("default"),o(!0),I({text:p("按下 Esc 键退出当前模式"),display:"none",opacity:0}))};(0,a.useEffect)((function(){if("undefined"!=typeof window)return window.addEventListener("keydown",Y.bind(E)),window.removeEventListener("keydown",Y.bind(E))}),[]);var H={disable:{color:"rgba(255, 255, 255, 0.85)"},enable:{color:"rgba(82, 115, 224, 1)"}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{id:"canvas-menu",children:(0,d.jsxs)("div",{className:"icon-container",children:[(0,d.jsx)("span",{className:"icon-span",style:{backgroundColor:"rgba(0, 0, 0, 0)"},onClick:function(){u(!g)},onMouseEnter:function(e){return Z(e,p(g?"隐藏边标签":"显示边标签"))},onMouseLeave:q,children:g?(0,d.jsx)(v.Z,{style:H.enable}):(0,d.jsx)(A.Z,{style:H.disable})}),(0,d.jsx)("span",{className:"icon-span",onClick:function(){t&&!t.destroyed&&(t.get("canvas").setCursor("default"),r&&L?(t.removePlugin(L),t.setMode("default"),I({text:p("按下 Esc 键退出鱼眼放大镜"),display:"none",opacity:0})):(c(),l&&o(!0),V&&T(!1),P&&Q(!1),I({text:p("按下 Esc 键退出鱼眼放大镜"),display:"block",opacity:1}),t.setMode("fisheyeMode"),L=new F.Fisheye({r:249,scaleRByWheel:!0,minR:100,maxR:500}),t.addPlugin(L)),n())},onMouseEnter:function(e){return Z(e,p(r?"关闭鱼眼放大镜":"打开鱼眼放大镜"))},onMouseLeave:q,children:r?(0,d.jsx)(w.Z,{style:H.enable}):(0,d.jsx)(j.Z,{style:H.disable})}),(0,d.jsx)("span",{className:"icon-span",onClick:function(){t&&!t.destroyed&&(o(),l?(t.setMode("default"),t.get("canvas").setCursor("default"),I({text:p("按下 Esc 键退出拉索选择模式"),display:"none",opacity:0})):(t.setMode("lassoSelect"),t.get("canvas").setCursor("crosshair"),r&&L&&(t.removePlugin(L),n(!0)),V&&T(!1),P&&Q(!1),I({text:p("按下 Esc 键退出拉索选择模式"),display:"block",opacity:1})))},onMouseEnter:function(e){return Z(e,p(l?"关闭拉索选择模式":"打开拉索选择模式"))},onMouseLeave:q,children:(0,d.jsx)(k.Z,{style:l?H.enable:H.disable})}),(0,d.jsx)("span",{className:"icon-span",onClick:function(){T((function(e){return e?(I({text:"",display:"none",opacity:0}),!1):(t.setMode("default"),L&&(t.removePlugin(L),n(!0)),l&&o(!0),P&&Q(!1),I({text:p("按住 SHIFT 键并点选两个节点作为路径起终点"),display:"block",opacity:1}),!0)}))},onMouseEnter:function(e){return Z(e,p("搜索最短路径"))},onMouseLeave:q,children:(0,d.jsx)(S.Z,{style:V?H.enable:H.disable})}),(0,d.jsxs)("span",{className:"icon-span",style:i()({width:"fit-content"},H.disable),children:[(0,d.jsx)("span",{className:"zoom-icon",onClick:function(){if(t&&!t.destroyed){var e=t.getZoom(),n=t.get("canvas"),a=n.getPointByClient(n.get("width")/2,n.get("height")/2),o=n.get("pixelRatio")||1;.75*e<.3||t.zoom(.75,{x:a.x/o,y:a.y/o})}},onMouseEnter:function(e){return Z(e,p("缩小"))},onMouseLeave:q,children:"-"}),(0,d.jsx)("span",{className:"zoom-icon",onClick:function(){t&&!t.destroyed&&t.fitView(16)},onMouseEnter:function(e){return Z(e,p("图内容适配容器，快捷键：ctrl + 1"))},onMouseLeave:q,style:{paddingLeft:"8px",paddingRight:"8px"},children:"FIT"}),(0,d.jsx)("span",{className:"zoom-icon",onClick:function(){if(t&&!t.destroyed){var e=t.getZoom(),n=t.get("canvas"),a=n.getPointByClient(n.get("width")/2,n.get("height")/2),o=n.get("pixelRatio")||1;1.25*e>5||t.zoom(1.25,{x:a.x/o,y:a.y/o})}},onMouseEnter:function(e){return Z(e,p("放大"))},onMouseLeave:q,children:"+"})]}),(0,d.jsx)("span",{className:"icon-span",onClick:function(){l&&o(!0),V&&T(!1),P&&Q(!1),r&&L&&(t.removePlugin(L),n(!0)),Q((function(e){return e?(I({text:"",display:"none",opacity:0}),!1):(I({text:p("输入需要搜索的节点 ID，并点击 Submit 按钮"),display:"block",opacity:1}),!0)}))},onMouseEnter:function(e){return Z(e,p("输入 ID 搜索节点"))},onMouseLeave:q,children:(0,d.jsx)(M.Z,{style:P?H.enable:H.disable})}),P&&(0,d.jsxs)("span",{onMouseEnter:function(e){return Z(e,p("输入需要搜索的节点 ID，并点击 Submit 按钮"))},onMouseLeave:q,children:[(0,d.jsx)("input",{type:"text",id:"search-node-input"}),(0,d.jsx)("button",{id:"submit-button",onClick:function(){var e=document.getElementById("search-node-input").value;h(e)||I({text:p("没有找到该节点"),display:"block",opacity:1})},children:"Submit"})]}),V&&(0,d.jsx)("span",{onMouseEnter:function(e){return Z(e,p("选择有且仅有两个节点作为端点，并点击 Find Path 按钮"))},onMouseLeave:q,children:(0,d.jsx)("button",{id:"submit-button",onClick:f,children:"Find Path"})})]})}),(0,d.jsx)("div",{className:"menu-tip",style:{opacity:y.opacity},children:y.text}),(0,d.jsx)("div",{id:"g6-canavs-menu-item-tip",style:{opacity:R.opacity},children:R.text})]})},R="undefined"!=typeof window,B=R?window.g6:null,D=R?n(62791):null;R&&D("\n    #legend-panel {\n      width: 30%;\n      position: absolute;\n      right: 0px;\n      top: 64px;\n      height: 100%;\n      background-color: #34373A;\n      border-left: 2px #444 solid;\n      color: rgba(255, 255, 255, 0.85);\n      text-align: center;\n      box-shadow: 18px 5px 0 0 rgba(0, 0, 0, 0.6);\n    }\n    #legend-panel .legned-title {\n      width: 100%;\n      color: rgba(255, 255, 255, 0.85);\n      text-align: center;\n      margin-bottom: 0px;\n    }\n    #legend-panel #legend-graph-container {\n      width: 100%;\n      height: 250px;\n      background-color: #2b2f33;\n      margin-top: 8px;\n    }\n    #legend-panel #discription-container {\n      margin-top: 16px;\n      padding: 0px 16px;\n      height: calc(100% - 430px);\n      overflow-y: scroll;\n    }\n  ");var O=null,P=100,Q=800,W=function(){var e=(0,b.$)(),t=e.t,n=e.i18n,o=a.useRef(null),r={nodes:[{id:"aggregated-node-legend",x:50,y:30,type:"aggregated-node",count:10},{id:"real-node-legend",x:50,y:90,size:20,type:"real-node"},{id:"aggregated-node-legend-new",x:50,y:220,type:"aggregated-node",count:10,new:!0},{id:"real-node-legend-new",x:100,y:220,size:20,type:"real-node",new:!0}],edges:[{source:"aggregated-node-legend",target:"real-node-legend",type:"custom-line",isReal:!1,size:4},{source:"aggregated-node-legend",target:"real-node-legend",type:"custom-line",isReal:!0,size:4}]};return r.edges.forEach((function(e){var t=e.size,n=e.isReal?void 0:[t,t],a=e.isReal?m.style.realEdgeStroke:m.style.stroke,o=e.isReal?m.style.realEdgeOpacity:m.style.strokeOpacity,i=Math.max(e.size/2+2,3),r="M ".concat(10,",0 L ").concat(20,",-").concat(i," L ").concat(20,",").concat(i," Z");e.style={stroke:a,strokeOpacity:o,cursor:"pointer",lineAppendWidth:Math.max(e.size||5,5),fillOpacity:1,lineDash:n,endArrow:!!r&&{path:r,d:10,fill:a,strokeOpacity:0}}})),(0,a.useEffect)((function(){if(o&&o.current&&(P=o.current.offsetWidth,Q=o.current.offsetHeight),!O||O.get("destroyed")){(O=new B.Graph({container:o.current,width:P,height:Q,defaultEdge:{labelCfg:{style:{fill:"rgba(255, 255, 255, 0.85)"}}}})).data(r),O.render(),O.getEdges().forEach((function(e){e.getModel().isReal?O.updateItem(e,{source:{x:20,y:170},target:{x:80,y:170},count:10}):O.updateItem(e,{source:{x:20,y:130},target:{x:80,y:130},count:10})}));var e=O.getGroup(),n={fill:"rgba(255, 255, 255, 0.85)",textBaseline:"middle",x:100,fontWeight:800,fontSize:14},a=e.addShape("text",{attrs:i()({text:t("聚合节点"),y:20},n)});e.addShape("text",{attrs:i()(i()({text:t("节点中间的数字代表该聚类所含的节点数量"),y:a.getBBox().maxY+16},n),{},{opacity:.6,fontSize:10})});var s=e.addShape("text",{attrs:i()({text:t("真实节点"),y:80},n)});e.addShape("text",{attrs:i()(i()({text:t("这是一个原数据中的真实节点"),y:s.getBBox().maxY+8},n),{},{opacity:.6,fontSize:10})});var l=e.addShape("text",{attrs:i()({text:t("聚合边"),y:130},n)});e.addShape("text",{attrs:i()(i()({text:t("至少一个端点是聚合节点"),y:l.getBBox().maxY+8},n),{},{opacity:.6,fontSize:10})});var c=e.addShape("text",{attrs:i()({text:t("真实边"),y:170},n)});e.addShape("text",{attrs:i()(i()({text:t("两个端点都是真实节点"),y:c.getBBox().maxY+8},n),{},{opacity:.6,fontSize:10})});var d=e.addShape("text",{attrs:i()(i()({text:t("绿点标记：新增节点"),y:210},n),{},{x:130})});e.addShape("text",{attrs:i()(i()({text:t("相较于上一次结果，右上方小绿点标记了\n本次更新结果中新增的聚合节点或真实节点"),y:d.getBBox().maxY+16},n),{},{opacity:.6,fontSize:10,x:130})})}})),"zh"===n.language?(0,d.jsxs)("div",{id:"legend-panel",children:[(0,d.jsx)("h1",{className:"legned-title",children:"图例与使用方式"}),(0,d.jsx)("a",{className:"description",href:"https://github.com/antvis/G6/blob/master/packages/site/site/pages/largegraph.zh.tsx",target:"_blanck",children:"源代码"}),(0,d.jsx)("div",{id:"legend-graph-container",ref:o}),(0,d.jsxs)("div",{id:"discription-container",children:[(0,d.jsx)("span",{className:"description",children:"一些科学研究表明，不超过 500 个节点的图可视化是适合终端用户阅读和交互式探索的。根据这个原则，在大规模图上，我们将元数据中的节点通过 LOUVAIN 聚类算法进行聚合。首先展示被聚合后的图，然后用户可以通过展开聚合节点进行下钻式探索。"}),(0,d.jsx)("span",{className:"description",children:"如果一次聚合后的节点数仍然庞大，可以进行多层次的聚合。为了控制渲染节点的数量，展开多个聚类后，最早被展开的聚类将会被自动收起。这一方案除了满足上述原则，还能减少前端计算和渲染的负担。"}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<图交互>"}),(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IgoxQ7wfjCcAAAAAAAAAAAAAARQnAQ",width:"120"})," ","       ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*cCk4SrHVfDsAAAAAAAAAAAAAARQnAQ",width:"150"}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("span",{className:"description",children:[" ","每个“聚合点”"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1y4AS7ucVXMAAAAAAAAAAAAAARQnAQ",width:"50"}),"代表了一个 LOUVAIN 计算出的聚类，包含多个“真实节点”"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IOgvSLWF1IQAAAAAAAAAAAAAARQnAQ",width:"20"}),".",(0,d.jsx)("strong",{children:"「右击」"})," 任意节点或边，一个相对应的上下文菜单将会出现。 右击"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1y4AS7ucVXMAAAAAAAAAAAAAARQnAQ",width:"50"})," ","并选择“展开聚合节点”，聚合节点将会被该聚类中的真实节点替代，这就是下钻式探索。 你也可以通过右击"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IOgvSLWF1IQAAAAAAAAAAAAAARQnAQ",width:"20"})," ","并选择“聚合该聚类”将已经展开的节点聚合；或选择 “寻找 k 度邻居”，被选中点的 k 度邻居节点将会被融合到当前图中。"]}),(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<画布菜单>"}),(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FKbFRIzj34EAAAAAAAAAAAAAARQnAQ",width:"300"}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{children:"在画布左上角，有一个画布菜单，包含一系列辅助探索的工具。从左到右，它们分别是："}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{children:(0,d.jsxs)("strong",{children:["- 显示/隐藏边标签；",(0,d.jsx)("br",{}),"- 鱼眼放大镜；",(0,d.jsx)("br",{}),"- 拉索选择模式；",(0,d.jsx)("br",{}),"- 寻找最短路径（按 SHIFT 点选两个端点）；",(0,d.jsx)("br",{}),"- 缩小；",(0,d.jsx)("br",{}),"- 使图内容适应视窗；",(0,d.jsx)("br",{}),"- 放大；",(0,d.jsx)("br",{}),"- 搜索一个节点（输入 ID）。"]})}),(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<注意>"}),(0,d.jsx)("span",{children:"该 demo 仅为展示大规模图可视化方案，因此使用的数据是一个较小的、模拟的数据集。除了上述内容外，还有很多其他的功能。愉快地探索吧。希望它对你有所帮助。"})]})]}):(0,d.jsxs)("div",{id:"legend-panel",children:[(0,d.jsx)("h1",{className:"legned-title",children:"Legend and Usage"}),(0,d.jsx)("a",{className:"description",href:"https://github.com/antvis/G6/blob/master/packages/site/site/pages/largegraph.zh.tsx",target:"_blanck",children:"Source Code"}),(0,d.jsx)("div",{id:"legend-graph-container",ref:o}),(0,d.jsxs)("div",{id:"discription-container",children:[(0,d.jsxs)("span",{className:"description",children:[" ","Some research has found that the graph visulization is readable and interactable for end users under 500 nodes. To reach this principle for large graph, we clustering the source data by LOUVAIN algorithm, and visualize the aggregated graph first. Then, end users are able to do drilling down exploration."]}),(0,d.jsxs)("span",{className:"description",children:[" ","If the number of nodes still large on aggregated graph, we can do multi-level aggregation. To control the number of rendering nodes, the earliest expanded cluster will be collapsed automatically. These rules also help us to avoid overloaded computation and rendering on front-end."]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<Graph Interaction>"}),(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IgoxQ7wfjCcAAAAAAAAAAAAAARQnAQ",width:"120"})," ","       ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*cCk4SrHVfDsAAAAAAAAAAAAAARQnAQ",width:"150"}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsxs)("span",{className:"description",children:[" ","Each 'Aggregated Node'"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1y4AS7ucVXMAAAAAAAAAAAAAARQnAQ",width:"50"}),"represents a cluster generated by LOUVAIN, it contains several 'Real Node'"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IOgvSLWF1IQAAAAAAAAAAAAAARQnAQ",width:"20"}),".",(0,d.jsx)("strong",{children:"「Right Click」"})," any node or edge on the graph, a corresponding contextmenu will show up. Right click"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1y4AS7ucVXMAAAAAAAAAAAAAARQnAQ",width:"50"})," ","and select 'Expand Node', the aggregated node will be replaced by the real nodes of the cluster. You can also right click"," ",(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IOgvSLWF1IQAAAAAAAAAAAAAARQnAQ",width:"20"})," ","and select 'Collapse the Cluster' to collapse it, or select 'Find k-Degree Neighbor', A neighbor graph of the selected node will be merged into the current graph."]}),(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<The Canvas Menu>"}),(0,d.jsx)("img",{src:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FKbFRIzj34EAAAAAAAAAAAAAARQnAQ",width:"300"}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{children:"There is a set of assistant tools on the canvas menu, which is on the left top of the canvas. From left to right, they are:"}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{children:(0,d.jsxs)("strong",{children:["- Show/Hide Edge Labels;",(0,d.jsx)("br",{}),"- Fisheye Lens;",(0,d.jsx)("br",{}),"- Lasso Select Mode;",(0,d.jsx)("br",{}),"- Find the Shortest Path (by clicking select two end nodes);",(0,d.jsx)("br",{}),"- Zoom-out;",(0,d.jsx)("br",{}),"- Fit the Graph to the View Port;",(0,d.jsx)("br",{}),"- Zoom-in;",(0,d.jsx)("br",{}),"- Search a Node(by typing the id)."]})}),(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),(0,d.jsx)("h3",{className:"legned-title",children:"<Notice>"}),(0,d.jsx)("span",{children:"The demo shows a small mocked dataset just for demonstration. Besides the functions introduced above, there are lots of other functions. We hope it is helpful for you. Explore it and have fun!"})]})]})},_="undefined"!=typeof window,V=_?window.g6:null,T=_?n(62791):null,Z=null,q=null;_&&(V.Algorithm.labelPropagation,Z=V.Algorithm.louvain,q=V.Algorithm.findShortestPath,T("\n\t\t.g6-component-contextmenu {\n\t\t\tposition: absolute;\n\t\t\tz-index: 2;\n\t\t\tlist-style-type: none;\n\t\t\tbackground-color: #363b40;\n\t\t\tborder-radius: 6px;\n\t\t\tfont-size: 14px;\n\t\t\tcolor: hsla(0,0%,100%,.85);\n\t\t\twidth: fit-content;\n\t\t\ttransition: opacity .2s;\n\t\t\ttext-align: center;\n\t\t\tpadding: 0px 20px 0px 20px;\n\t\t\tbox-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n\t\t\tborder: 0px;\n\t\t}\n\t\t.g6-component-contextmenu ul {\n\t\t\tpadding-left: 0px;\n\t\t\tmargin: 0;\n\t\t}\n\t\t.g6-component-contextmenu li {\n\t\t\tcursor: pointer;\n\t\t\tlist-style-type: none;\n\t\t\tlist-style: none;\n\t\t\tmargin-left: 0;\n\t\t\tline-height: 38px;\n\t}\n\t\t}\n\t\t.g6-component-contextmenu li:hover {\n\t\t\tcolor: #aaa;\n\t\t}\n\t"));var Y,H,G="degree",U=null,K={nodes:[],edges:[]},X={},$={},J=[],ee=!0,te={},ne=void 0,ae={type:"",instance:null,destroyed:!0},oe=[],ie=[],re=!1,se=800,le=800,ce=function(e){return function(t,n){var a=t[e];return n[e]-a}},de=function(e){e&&(ge(e),ue(e))},ge=function(e){e.findAllByState("node","focus").forEach((function(t){e.setItemState(t,"focus",!1)}))},ue=function(e){e.findAllByState("edge","focus").forEach((function(t){e.setItemState(t,"focus",!1)}))},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e?e.length>t?"".concat(e.substr(0,t)).concat(n):e:""},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e&&e.split("").length>t?"".concat(e.substr(0,t),"..."):e},pe=function(e,t,n,a,o,i){var r=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(!e||0===e.length)return{};var s={},l=-1/0,c=.3,d=c*n,g=c*a;e.forEach((function(e){e.type=0===e.level?"real-node":"aggregated-node",e.isReal=0===e.level,e.label="".concat(e.id),e.labelLineNum=void 0,e.oriLabel=e.label,e.label=he(e.label,5,"..."),e.degree=0,e.inDegree=0,e.outDegree=0,s[e.id]&&(console.warn("node exists already!",e.id),e.id="".concat(e.id).concat(Math.random())),s[e.id]=e,e.count>l&&(l=e.count);var t=te?te[e.id]:void 0;t?(e.x=t.x,e.y=t.y,e.new=!1):(e.new=!r,!ne||e.x||e.y||(e.x=ne.x+30*Math.cos(Math.random()*Math.PI*2),e.y=ne.y+30*Math.sin(Math.random()*Math.PI*2)))}));var u=-1/0,h=1/0;t.forEach((function(e){if(e.id?"edge"!==e.id.split("-")[0]&&(e.id="edge-".concat(e.id)):e.id=(0,y.uniqueId)("edge"),s[e.source]&&s[e.target]){var t=s[e.source],n=s[e.target];t&&n||console.warn("source or target is not defined!!!",e,t,n),t.degree++,n.degree++,t.outDegree++,n.inDegree++,e.count>u&&(u=e.count),e.count<h&&(h=e.count)}else console.warn("edge source target does not exist",e.source,e.target,e.id)})),e.sort(ce(G));var f=e[0].degree||1,p=[];e.forEach((function(e,t){var n=e.count/l,a=0===e.level;e.size=a?20:53,e.isReal=a,e.labelCfg={position:"bottom",offset:5,style:{fill:x.labelCfg.style.fill,fontSize:6+6*n||12,stroke:x.labelCfg.style.stroke,lineWidth:3}},e.degree||p.push(e)}));var b=u-h,v=1,A=7,w=A-v;return t.forEach((function(e){var t=s[e.target],n=(e.count-h)/b*w+v||1;e.size=n;var a=Math.max(n/2+2,3),r=t.size+10,l="M ".concat(r,",0 L ").concat(r+10,",-").concat(a," L ").concat(r+10,",").concat(a," Z"),c=t.size/2+10;e.source===e.target&&(e.type="loop",l=void 0);var d=s[e.source],g=t.isReal&&d.isReal;e.isReal=g;var u=g?m.style.realEdgeStroke:m.style.stroke,f=g?m.style.realEdgeOpacity:m.style.strokeOpacity,p=Math.max(n,2),x=g?void 0:[p,p];e.style={stroke:u,strokeOpacity:f,cursor:"pointer",lineAppendWidth:Math.max(e.size||5,5),fillOpacity:1,lineDash:x,endArrow:!!l&&{path:l,d:c,fill:u,strokeOpacity:0}},e.labelCfg={autoRotate:!0,style:{stroke:m.labelCfg.style.stroke,fill:m.labelCfg.style.fill,lineWidth:4,fontSize:12,lineAppendWidth:10,opacity:1}},e.oriLabel||(e.oriLabel=e.label),e.label=o||!i?"":fe(e.label,5);var y=d.size/2+20,A=t.size/2+20;d.x&&!t.x&&(t.x=d.x+y*Math.cos(Math.random()*Math.PI*2)),d.y&&!t.y&&(t.y=d.y+y*Math.sin(Math.random()*Math.PI*2)),t.x&&!d.x&&(d.x=t.x+A*Math.cos(Math.random()*Math.PI*2)),t.y&&!d.y&&(d.y=t.y+A*Math.sin(Math.random()*Math.PI*2)),d.x||d.y||!ne||(d.x=ne.x+30*Math.cos(Math.random()*Math.PI*2),d.y=ne.y+30*Math.sin(Math.random()*Math.PI*2)),t.x||t.y||!ne||(t.x=ne.x+30*Math.cos(Math.random()*Math.PI*2),t.y=ne.y+30*Math.sin(Math.random()*Math.PI*2))})),H={x:n-d,y:a-g},p.forEach((function(e){e.x||e.y||(e.x=H.x+30*Math.cos(Math.random()*Math.PI*2),e.y=H.y+30*Math.sin(Math.random()*Math.PI*2))})),V.Util.processParallelEdges(t,12.5,"custom-quadratic","custom-line"),{maxDegree:f,edges:t}},xe=function(e,t,n){var a=n||{preventOverlap:!0},o=a.linkDistance,i=a.edgeStrength,r=a.nodeStrength,s=a.nodeSpacing,l=a.preventOverlap,c=a.nodeSize,d=a.collideStrength,g=a.alpha,u=a.alphaDecay,h=a.alphaMin;o||0===o||(o=225),i||0===i||(i=50),r||0===r||(r=200),s||0===s||(s=5);var f={type:"gForce",minMovement:.01,maxIteration:5e3,preventOverlap:l,damping:.99,gpuEnabled:t,linkDistance:function(e){var t=o,n=X[e.source]||$[e.source],a=X[e.target]||$[e.target];return n.level||a.level||(t=.3*o),t},edgeStrength:function(e){var t=X[e.source]||$[e.source],n=X[e.target]||$[e.target];return t.level&&n.level?i/2:(t.level||n.level,i)},nodeStrength:function(e){return 0===e.degree?-10:e.level?2*r:r},nodeSize:function(e){return!c&&e.size?e.size:50},nodeSpacing:function(e){return 0===e.degree?2*s:(e.level,s)},onLayoutEnd:function(){t&&e.getEdges().forEach((function(e){e.oriLabel&&e.update({label:fe(e.oriLabel,5)})}))},tick:function(){e.refreshPositions()}};return c&&(f.nodeSize=c),d&&(f.collideStrength=d),g&&(f.alpha=g),u&&(f.alphaDecay=u),h&&(f.alphaMin=h),f},me=function(e,t,n,a,o,i,r){if(t&&e){de(e),e.getNodes().forEach((function(e){e.isVisible()||e.show()})),e.getEdges().forEach((function(e){e.isVisible()||e.show()}));var s,l;if(s=null==t?void 0:t.nodes,l=pe(s,t.edges||[],n,a,o,i,r).edges,e.changeData({nodes:s,edges:l}),function(e){J.forEach((function(t){e.hideItem(t)}))}(e),e.getNodes().forEach((function(e){e.toFront()})),ae.instance.stop(),s.length>100){ae.instance.destroy();var c=xe(e,!0);c.center=[n/2,a/2],ae.instance=new V.Layout.gForce(c)}return ae.instance.init({nodes:t.nodes,edges:l}),ae.instance.minMovement=1e-4,ae.instance.getMass=function(e){return te[e.id]?5:1},ae.instance.execute(),{nodes:s,edges:l}}},ye=function(e,t,n,a,o,i){var r=[],s=[],l={},c={};return o.forEach((function(e){l[e.id]=!0})),i.forEach((function(e){c[e.id]=!0})),e.clusters.forEach((function(e,t){l[e.id]?(r=r.concat(e.nodes),a[e.id].expanded=!0):(r.push(a[e.id]),a[e.id].expanded=!1)})),t.edges.forEach((function(e){var t=l[n[e.source].clusterId],a=l[n[e.target].clusterId];if(t&&a)s.push(e);else if(t){var o=n[e.target].clusterId,i={source:e.source,target:o,id:(0,y.uniqueId)("edge"),label:""};s.push(i)}else if(a){var r=n[e.source].clusterId,c={target:e.target,source:r,id:(0,y.uniqueId)("edge"),label:""};s.push(c)}})),e.clusterEdges.forEach((function(e){l[e.source]||l[e.target]||s.push(e)})),{nodes:r,edges:s}},be=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!(n<=0)){for(var o=[],i=[],r=t.clusterId,s=t.id,l=Math.ceil(Math.random()*a),c=0;c<l;c++){var d={id:(0,y.uniqueId)("node"),clusterId:r,level:0,colorSet:t.colorSet};o.push(d);var g=Math.random()>.5,u=g?s:d.id,h=g?d.id:s,f={id:(0,y.uniqueId)("edge"),source:u,target:h,label:"".concat(u,"-").concat(h)};i.push(f);var p=e(d,n-1,a);p&&(o=o.concat(p.nodes),i=i.concat(p.edges))}return{nodes:o,edges:i}}},ve=function e(t,n,a,o){for(var i=0;i<a;i++){var r=n[i];if(!o[i]&&t.parentId===r.id){o[i]=!0,e(r,n,a,o);break}}},Ae=function(e){for(var t={},n=e.length,a=0;a<n;a++){var o=e[a].getModel();t[o.id]={x:o.x,y:o.y,level:o.level}}return t},we=function(){var e=(0,b.$)().t,t=a.useRef(null),n=(0,a.useState)(!1),o=s()(n,2),r=o[0],l=o[1],c=(0,a.useState)(!1),g=s()(c,2),u=g[0],h=g[1],f=(0,a.useState)(!1),x=s()(f,2),m=x[0],v=x[1],A=(0,a.useState)(null),w=s()(A,2),j=w[0],k=w[1],S=function(){ae.instance.stop()};return(0,a.useEffect)((function(){U||fetch("https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json").then((function(e){return e.json()})).then((function(n){t&&t.current&&(se=t.current.offsetWidth,le=t.current.offsetHeight),Y=n,X={};var a=Z(n,!1,"weight"),o={nodes:[],edges:[]};a.clusters.forEach((function(e,t){e.nodes.forEach((function(e){e.level=0,e.label=e.id,e.type="",e.colorSet=p[t],X[e.id]=e}));var n={id:e.id,type:"aggregated-node",count:e.nodes.length,level:1,label:e.id,colorSet:p[t],idx:t};$[e.id]=n,o.nodes.push(n)})),a.clusterEdges.forEach((function(e){var t=i()(i()({},e),{},{size:Math.log(e.count),label:"",id:(0,y.uniqueId)("edge")});t.source===t.target?(t.type="loop",t.loopCfg={dist:20}):t.type="line",o.edges.push(t)})),n.edges.forEach((function(e){e.label="".concat(e.source,"-").concat(e.target),e.id=(0,y.uniqueId)("edge")}));var r=pe((K=o).nodes,K.edges,se,le,ee,!0,!0).edges,s=new V.Menu({shouldBegin:function(e){return!!(e.target&&e.target.isCanvas&&e.target.isCanvas())||!!e.item},getContent:function(t){var n=t.item;if(t.target&&t.target.isCanvas&&t.target.isCanvas())return"<ul>\n                  <li id='show'>".concat(e("显示所有隐藏元素"),"</li>\n                  <li id='collapseAll'>").concat(e("聚合所有聚类"),"</li>\n                </ul>");if(n){var a=null==n?void 0:n.getType(),o=null==n?void 0:n.getModel();return a&&o?"node"===a?0!==o.level?"<ul>\n                      <li id='expand'>".concat(e("展开该聚合点"),"</li>\n                      <li id='hide'>").concat(e("隐藏该节点"),"</li>\n                    </ul>"):"<ul>\n                      <li id='collapse'>".concat(e("聚合所属聚类"),"</li>\n                      <li id='neighbor-1'>").concat(e("扩展一度关系"),"</li>\n                      <li id='neighbor-2'>").concat(e("扩展二度关系"),"</li>\n                      <li id='neighbor-3'>").concat(e("扩展三度关系"),"</li>\n                      <li id='hide'>").concat(e("隐藏该节点"),"</li>\n                    </ul>"):"<ul>\n                    <li id='hide'>".concat(e("隐藏该边"),"</li>\n                  </ul>"):void 0}},handleMenuClick:function(e,t){var o,i=null==t?void 0:t.getModel(),r=e.id.split("-");switch(r[0]){case"hide":U.hideItem(t),J.push(i.id);break;case"expand":var s=function(e,t,n,a){if(ne={x:t.x,y:t.y},e>40){var o={},i=a.length;ve(t,a,i,o);for(var r=-1,s=0;s<i;s++)if(!o[s]){r=s;break}if(-1!==r){var l=a[r];if(2===l.level){for(var c=!1,d=0;d<i;d++){var g=a[d];if(g.parentId===l.id&&1===g.level){c=!0,l=g,a.splice(d,1);break}}c||a.splice(r,1)}else a.splice(r,1);for(var u,h=l.id.split("-"),f=0;f<h.length-1;f++){var p=h[f];u=u?"".concat(u,"-").concat(p):p}var x={id:u,parentId:l.id,level:l.level-1};n.push(x)}}var m={id:t.id,level:t.level,parentId:t.parentId};return a.push(m),U.get("canvas").setCursor("default"),{expandArray:a,collapseArray:n}}(U.getNodes().length,i,ie,oe);oe=s.expandArray,ie=s.collapseArray,o=ye(a,n,X,$,oe,ie);break;case"collapse":var l=$[i.clusterId];ne={x:l.x,y:l.y},ie.push(l);for(var c=0;c<oe.length;c++)if(oe[c].id===i.clusterId){oe.splice(c,1);break}o=ye(a,n,X,$,oe,ie);break;case"collapseAll":o=ye(a,n,X,$,oe=[],ie=[]);break;case"neighbor":o=function(e,t,n,a,o,i,r){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:5;ne={x:e.x,y:e.y};var l=be(e,t,s);n.nodes=n.nodes.concat(l.nodes),n.edges=n.edges.concat(l.edges),l.nodes.forEach((function(e){i[e.id]=e}));var c=e.clusterId;return a.clusters.forEach((function(e){e.id===c&&(e.nodes=e.nodes.concat(l.nodes),e.sumTot+=l.edges.length)})),r[c].count+=l.nodes.length,o.nodes=o.nodes.concat(l.nodes),o.edges=o.edges.concat(l.edges),o}(i,parseInt(r[1]),n,a,K,X,$,10);break;case"show":!function(e){e.getNodes().forEach((function(t){t.isVisible()||e.showItem(t)})),e.getEdges().forEach((function(e){e.isVisible()||e.showItem(e)})),J=[]}(U)}o&&(te=Ae(U.getNodes()),me(U,K=o,se,le,ee,!0,!1))},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]});(U=new V.Graph({container:t.current,width:se,height:le,linkCenter:!0,minZoom:.1,groupByTypes:!1,modes:{default:[{type:"drag-canvas",enableOptimize:!0},{type:"zoom-canvas",enableOptimize:!0,optimizeZoom:.01},"drag-node","shortcuts-call"],lassoSelect:[{type:"zoom-canvas",enableOptimize:!0},{type:"lasso-select",selectedState:"focus",trigger:"drag"}],fisheyeMode:[]},defaultNode:{type:"aggregated-node",size:20},plugins:[s]})).get("canvas").set("localRefresh",!1);var l=xe(U,ee);l.center=[se/2,le/2],ae.instance=new V.Layout.gForce(l),ae.instance.init({nodes:K.nodes,edges:r}),ae.instance.execute(),function(e){e.on("keydown",(function(e){var t=e.key;t&&(re="shift"===t.toLowerCase())})),e.on("keyup",(function(e){var t=e.key;t&&"shift"===t.toLowerCase()&&(re=!1)})),e.on("node:mouseenter",(function(t){var n=t.item,a=n.getModel(),o=a.label;a.oriFontSize=a.labelCfg.style.fontSize,n.update({label:a.oriLabel}),a.oriLabel=o,e.setItemState(n,"hover",!0),n.toFront()})),e.on("node:mouseleave",(function(t){var n=t.item,a=n.getModel(),o=a.label;n.update({label:a.oriLabel}),a.oriLabel=o,e.setItemState(n,"hover",!1)})),e.on("edge:mouseenter",(function(e){var t=e.item,n=t.getModel(),a=n.label;t.update({label:n.oriLabel}),n.oriLabel=a,t.toFront(),t.getSource().toFront(),t.getTarget().toFront()})),e.on("edge:mouseleave",(function(e){var t=e.item,n=t.getModel(),a=n.label;t.update({label:n.oriLabel}),n.oriLabel=a})),e.on("node:click",(function(t){S(),re?ue(e):de(e);var n=t.item;e.setItemState(n,"focus",!0),re||n.getEdges().forEach((function(t){e.setItemState(t,"focus",!0)}))})),e.on("edge:click",(function(t){S(),re||de(e);var n=t.item;e.setItemState(n,"focus",!0)})),e.on("canvas:click",(function(t){de(e)}))}(U),U.data({nodes:o.nodes,edges:r}),U.render(),k(U)}))})),(0,a.useEffect)((function(){U&&!U.get("destroyed")&&U.getEdges().forEach((function(e){var t=e.getModel().oriLabel;e.update({label:m?fe(t,5):""})}))}),[m]),"undefined"!=typeof window&&(window.onresize=function(){t&&t.current&&(se=t.current.offsetWidth,le=t.current.offsetHeight),U&&ae.instance&&(ae.instance.center=[se/2,le/2],U.changeSize(se,le))}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{ref:t,style:{backgroundColor:"#2b2f33",height:"calc(100vh - 100px)",width:"70%"}}),(0,d.jsx)(W,{}),j&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(N,{graph:U,clickFisheyeIcon:function(e){l(!e&&!r)},clickLassoIcon:function(e){h(!e&&!u)},fisheyeEnabled:r,lassoEnabled:u,stopLayout:S,edgeLabelVisible:m,setEdgeLabelVisible:v,searchNode:function(e){if(!U||U.get("destroyed"))return!1;var t=U.findById(e),n=X[e];return!t&&n&&(te=Ae(U.getNodes()),K=function(e,t,n,a,o){var i=e.id;return o.nodes.push(e),t.edges.forEach((function(e){if(e.source===i){var t=n[e.target].clusterId;a[t].expanded?o.edges.push(e):o.edges.push({id:(0,y.uniqueId)("edge"),source:i,target:t})}else if(e.target===i){var r=n[e.source].clusterId;a[r].expanded?o.edges.push(e):o.edges.push({id:(0,y.uniqueId)("edge"),target:i,source:r})}})),o}(n,Y,X,$,K),me(U,K,se,le,ee,!0,!1)),!!t&&((!t||"node"===t.getType())&&(U.focusItem(t,!0),de(U),U.setItemState(t,"focus",!0),!0))},handleFindPath:function(){if(!U||U.get("destroyed"))return!1;var e=U.findAllByState("node","focus");if(2===e.length){de(U);var t=q(U,e[0].getID(),e[1].getID()).path;U.getEdges().forEach((function(e){var n=e.getModel(),a=n.source,o=n.target,i=t.indexOf(a),r=t.indexOf(o);-1!==i&&-1!==r&&1===Math.abs(i-r)&&(e.toFront(),U.setItemState(e,"focus",!0))})),t.forEach((function(e){var t=U.findById(e);t.toFront(),U.setItemState(t,"focus",!0)}))}else alert("Please Select only Two Nodes two Find the Path!")}})})]})},je=n(23948),ke=n(80407),Se=function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(je.h,{}),(0,d.jsx)(we,{}),(0,d.jsx)(ke.$,{})]})}}}]);